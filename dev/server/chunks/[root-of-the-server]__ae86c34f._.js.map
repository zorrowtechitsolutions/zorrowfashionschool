{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/farhan/Downloads/zorrow-fashion-school/components/emailComposition.ts"],"sourcesContent":["interface EmailProps {\n  name: string;\n  email: string;\n  phone: string;\n  course: string;\n}\n\nexport const createAdmissionEmail = (data: EmailProps) => {\n  const styledEmail = {\n    body: {\n      name: data.name,\n      intro: 'Thank you for your interest in ZORROW School of Fashion!',\n      table: {\n        data: [\n          {\n            'Application Details': 'Information',\n            'Full Name': data.name,\n            'Email Address': data.email,\n            'Phone Number': data.phone,\n            'Selected Course': data.course,\n          }\n        ]\n      },\n      action: {\n        instructions: 'Your application has been received. Our admissions team will contact you within 24 hours to discuss the next steps.',\n        button: {\n          color: '#ec4899',\n          text: 'Visit Our Website',\n          link: 'https://www.zorrowfashion.com'\n        }\n      },\n      outro: 'We look forward to helping you start your fashion journey!'\n    }\n  };\n\n  const plainText = `\nDear ${data.name},\n\nThank you for your interest in ZORROW School of Fashion!\n\nWe have received your application with the following details:\n\nFull Name: ${data.name}\nEmail Address: ${data.email}\nPhone Number: ${data.phone}\nSelected Course: ${data.course}\n\nYour application has been received. Our admissions team will contact you within 24 hours to discuss the next steps.\n\nVisit our website: https://www.zorrowfashion.com\n\nWe look forward to helping you start your fashion journey!\n\nBest regards,\nZORROW School of Fashion Team\n  `;\n\n  return { styledEmail, plainText };\n};\n\n// Admin notification email\nexport const createAdminNotificationEmail = (data: EmailProps) => {\n  const styledEmail = {\n    body: {\n      name: 'Admissions Team',\n      intro: 'New admission application received!',\n      table: {\n        data: [\n          {\n            'Applicant Name': data.name,\n            'Email': data.email,\n            'Phone': data.phone,\n            'Course Interested': data.course,\n            'Applied On': new Date().toLocaleString()\n          }\n        ]\n      },\n      action: {\n        instructions: 'Please review this application and contact the applicant within 24 hours.',\n        button: {\n          color: '#ec4899',\n          text: 'Review Application',\n          link: 'https://www.zorrowfashion.com/admin'\n        }\n      },\n      outro: 'This is an automated notification from your admissions system.'\n    }\n  };\n\n  const plainText = `\nNew Admission Application Received!\n\nApplicant Details:\n- Name: ${data.name}\n- Email: ${data.email}\n- Phone: ${data.phone}\n- Course: ${data.course}\n- Applied On: ${new Date().toLocaleString()}\n\nPlease review this application and contact the applicant within 24 hours.\n\nThis is an automated notification from your admissions system.\n  `;\n\n  return { styledEmail, plainText };\n};"],"names":[],"mappings":";;;;;;AAOO,MAAM,uBAAuB,CAAC;IACnC,MAAM,cAAc;QAClB,MAAM;YACJ,MAAM,KAAK,IAAI;YACf,OAAO;YACP,OAAO;gBACL,MAAM;oBACJ;wBACE,uBAAuB;wBACvB,aAAa,KAAK,IAAI;wBACtB,iBAAiB,KAAK,KAAK;wBAC3B,gBAAgB,KAAK,KAAK;wBAC1B,mBAAmB,KAAK,MAAM;oBAChC;iBACD;YACH;YACA,QAAQ;gBACN,cAAc;gBACd,QAAQ;oBACN,OAAO;oBACP,MAAM;oBACN,MAAM;gBACR;YACF;YACA,OAAO;QACT;IACF;IAEA,MAAM,YAAY,CAAC;KAChB,EAAE,KAAK,IAAI,CAAC;;;;;;WAMN,EAAE,KAAK,IAAI,CAAC;eACR,EAAE,KAAK,KAAK,CAAC;cACd,EAAE,KAAK,KAAK,CAAC;iBACV,EAAE,KAAK,MAAM,CAAC;;;;;;;;;;EAU7B,CAAC;IAED,OAAO;QAAE;QAAa;IAAU;AAClC;AAGO,MAAM,+BAA+B,CAAC;IAC3C,MAAM,cAAc;QAClB,MAAM;YACJ,MAAM;YACN,OAAO;YACP,OAAO;gBACL,MAAM;oBACJ;wBACE,kBAAkB,KAAK,IAAI;wBAC3B,SAAS,KAAK,KAAK;wBACnB,SAAS,KAAK,KAAK;wBACnB,qBAAqB,KAAK,MAAM;wBAChC,cAAc,IAAI,OAAO,cAAc;oBACzC;iBACD;YACH;YACA,QAAQ;gBACN,cAAc;gBACd,QAAQ;oBACN,OAAO;oBACP,MAAM;oBACN,MAAM;gBACR;YACF;YACA,OAAO;QACT;IACF;IAEA,MAAM,YAAY,CAAC;;;;QAIb,EAAE,KAAK,IAAI,CAAC;SACX,EAAE,KAAK,KAAK,CAAC;SACb,EAAE,KAAK,KAAK,CAAC;UACZ,EAAE,KAAK,MAAM,CAAC;cACV,EAAE,IAAI,OAAO,cAAc,GAAG;;;;;EAK1C,CAAC;IAED,OAAO;QAAE;QAAa;IAAU;AAClC"}},
    {"offset": {"line": 251, "column": 0}, "map": {"version":3,"sources":["file:///Users/farhan/Downloads/zorrow-fashion-school/app/api/send-admission-email/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport { createAdmissionEmail, createAdminNotificationEmail } from '@/components/emailComposition';\nconst nodemailer = require(\"nodemailer\");\nconst Mailgen = require(\"mailgen\");\n\n// Configure Mailgen - FIXED: Use a valid theme\nconst mailGenerator = new Mailgen({\n  theme: 'default', // 'default' is a valid built-in theme\n  product: {\n    name: \"ZORROW School of Fashion\",\n    link: 'https://www.zorrowfashion.com',\n    // Optional: Add your logo\n    // logo: 'https://www.zorrowfashion.com/logo.png'\n  }\n});\n\nexport async function POST(request: Request) {\n  try {\n    const body = await request.json();\n    const { name, email, phone, course } = body;\n\n    console.log(\"Received form data:\", { name, email, phone, course });\n\n    // Validate required fields\n    if (!name || !email || !phone || !course) {\n      return NextResponse.json(\n        { error: \"All fields are required\" },\n        { status: 400 }\n      );\n    }\n\n    // Create email content for applicant\n    const applicantEmail = createAdmissionEmail({ name, email, phone, course });\n    const applicantEmailBody = mailGenerator.generate(applicantEmail.styledEmail);\n\n    // Create email content for admin\n    const adminEmail = createAdminNotificationEmail({ name, email, phone, course });\n    const adminEmailBody = mailGenerator.generate(adminEmail.styledEmail);\n\n    // Configure transporter\n    const transporter = nodemailer.createTransport({\n      service: \"gmail\",\n      auth: {\n        user: process.env.EMAIL_USER,\n        pass: process.env.EMAIL_APP_PASSWORD,\n      },\n    });\n\n    // Verify transporter configuration\n    await transporter.verify();\n    console.log(\"Transporter verified successfully\");\n\n    // Send email to applicant\n    const applicantMessage = {\n      from: `\"ZORROW School of Fashion\" <${process.env.EMAIL_USER}>`,\n      to: email,\n      subject: \"Your Application to ZORROW School of Fashion\",\n      html: applicantEmailBody,\n      text: applicantEmail.plainText,\n    };\n\n    // Send email to admin\n    const adminMessage = {\n      from: `\"ZORROW Admissions\" <${process.env.EMAIL_USER}>`,\n      to: process.env.ADMIN_EMAIL || process.env.EMAIL_USER,\n      subject: `New Admission Application: ${name} - ${course}`,\n      html: adminEmailBody,\n      text: adminEmail.plainText,\n    };\n\n    // Send emails\n    await transporter.sendMail(applicantMessage);\n    await transporter.sendMail(adminMessage);\n\n    return NextResponse.json(\n      { message: \"Application submitted successfully! Check your email for confirmation.\" },\n      { status: 200 }\n    );\n\n  } catch (err: any) {\n    console.error(\"Email sending error:\", err);\n    \n    return NextResponse.json(\n      { \n        error: \"Failed to send email. Please try again.\",\n        details: err.message \n      },\n      { status: 500 }\n    );\n  }\n}"],"names":[],"mappings":";;;;AAAA;AACA;;;AACA,MAAM;AACN,MAAM;AAEN,+CAA+C;AAC/C,MAAM,gBAAgB,IAAI,QAAQ;IAChC,OAAO;IACP,SAAS;QACP,MAAM;QACN,MAAM;IAGR;AACF;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG;QAEvC,QAAQ,GAAG,CAAC,uBAAuB;YAAE;YAAM;YAAO;YAAO;QAAO;QAEhE,2BAA2B;QAC3B,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,SAAS,CAAC,QAAQ;YACxC,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA0B,GACnC;gBAAE,QAAQ;YAAI;QAElB;QAEA,qCAAqC;QACrC,MAAM,iBAAiB,IAAA,wJAAoB,EAAC;YAAE;YAAM;YAAO;YAAO;QAAO;QACzE,MAAM,qBAAqB,cAAc,QAAQ,CAAC,eAAe,WAAW;QAE5E,iCAAiC;QACjC,MAAM,aAAa,IAAA,gKAA4B,EAAC;YAAE;YAAM;YAAO;YAAO;QAAO;QAC7E,MAAM,iBAAiB,cAAc,QAAQ,CAAC,WAAW,WAAW;QAEpE,wBAAwB;QACxB,MAAM,cAAc,WAAW,eAAe,CAAC;YAC7C,SAAS;YACT,MAAM;gBACJ,MAAM,QAAQ,GAAG,CAAC,UAAU;gBAC5B,MAAM,QAAQ,GAAG,CAAC,kBAAkB;YACtC;QACF;QAEA,mCAAmC;QACnC,MAAM,YAAY,MAAM;QACxB,QAAQ,GAAG,CAAC;QAEZ,0BAA0B;QAC1B,MAAM,mBAAmB;YACvB,MAAM,CAAC,4BAA4B,EAAE,QAAQ,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC;YAC9D,IAAI;YACJ,SAAS;YACT,MAAM;YACN,MAAM,eAAe,SAAS;QAChC;QAEA,sBAAsB;QACtB,MAAM,eAAe;YACnB,MAAM,CAAC,qBAAqB,EAAE,QAAQ,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC;YACvD,IAAI,QAAQ,GAAG,CAAC,WAAW,IAAI,QAAQ,GAAG,CAAC,UAAU;YACrD,SAAS,CAAC,2BAA2B,EAAE,KAAK,GAAG,EAAE,QAAQ;YACzD,MAAM;YACN,MAAM,WAAW,SAAS;QAC5B;QAEA,cAAc;QACd,MAAM,YAAY,QAAQ,CAAC;QAC3B,MAAM,YAAY,QAAQ,CAAC;QAE3B,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;QAAyE,GACpF;YAAE,QAAQ;QAAI;IAGlB,EAAE,OAAO,KAAU;QACjB,QAAQ,KAAK,CAAC,wBAAwB;QAEtC,OAAO,gJAAY,CAAC,IAAI,CACtB;YACE,OAAO;YACP,SAAS,IAAI,OAAO;QACtB,GACA;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}